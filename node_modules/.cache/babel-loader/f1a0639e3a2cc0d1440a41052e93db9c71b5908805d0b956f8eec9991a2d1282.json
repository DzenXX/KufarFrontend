{"ast":null,"code":"var _jsxFileName = \"/Users/tim/Documents/programming/newProject/newpr/src/components/Chat/Chat.jsx\",\n  _s = $RefreshSig$();\nimport { useDispatch } from \"react-redux\";\nimport Account from \"./Account/Account\";\nimport { useForm } from 'react-hook-form';\nimport React from \"react\";\nimport { createMessage, fetchMessages, selectMessages } from \"../../redux/slices/chat\";\nimport { selectEmail } from \"../../redux/slices/auth\";\nimport { useSelector } from \"react-redux\";\nimport { useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Chat() {\n  _s();\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    fetchFunk();\n  }, []);\n  const fetchFunk = async () => {\n    const data = await dispatch(fetchMessages());\n    console.log(messages);\n    console.log(data.payload);\n  };\n  const {\n    register,\n    handleSubmit,\n    setError,\n    formState: {\n      errors,\n      isValid\n    }\n  } = useForm({\n    defaultValues: {\n      receiver: '',\n      text: ''\n    }\n  });\n  const onSubmit = async values => {\n    if (mail === truemail) {\n      values.receiver = \"anatoliy@gmai.com\";\n    } else {\n      values.receiver = \"parfparf@gmail.com\";\n    }\n    console.log(values);\n    const data = await dispatch(createMessage(values));\n    input.current.values = '';\n    console.log('запросик');\n    if (!data.payload) {\n      return alert(\"Не удалось отправить сообщение\");\n    }\n    fetchFunk();\n    // if ('token' in data.payload) {\n    //    window.localStorage.setItem('token', data.payload.token)\n    //    setIsOpenPopup1(false)\n    // }\n  };\n\n  const messages = useSelector(selectMessages);\n  const mail = useSelector(selectEmail);\n  const truemail = 'parfparf@gmail.com';\n  const input = useRef(null);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat__wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat__accounts\",\n        children: /*#__PURE__*/_jsxDEV(Account, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat__area area\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"area__login\",\n          children: mail === truemail ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Anatoliy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 20\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"(anatoliy@gmail.com)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Timaaa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 20\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"(parfparf@gmail.com)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 39\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"area__main\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"area__content\",\n            children: messages === null || messages === void 0 ? void 0 : messages.map(m => {\n              if (m.author.email == mail) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"area__message area__message_my\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: m.text\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 90,\n                    columnNumber: 79\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 30\n                }, this);\n              } else {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"area__message\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: m.text\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 60\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 29\n                }, this);\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 10\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit(onSubmit),\n          className: \"area__bottom\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ref: input,\n            ...register('text', {\n              required: \"Напишите сообщение\"\n            }),\n            className: \"area__input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"area__button\",\n            children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 10\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(Chat, \"Go9o2HNXbCI21f48HgFLy1/SLlA=\", false, function () {\n  return [useDispatch, useForm, useSelector, useSelector];\n});\n_c = Chat;\nexport default Chat;\n{/* <form onSubmit={handleSubmit(onSubmit)}>\n                    \n                        <TextField\n                           label=\"Cообщение\"\n                           type=\"email\"\n                           className='email-textfield'\n                           fullwidth\n                           error={Boolean(errors.email?.message)}\n                           {...register('email', { required: \"Укажите почту\" })}\n                        />\n                     \n                     <button type='submit' class=\"login__button\"><span>Войти</span></button>\n </form> */}\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["useDispatch","Account","useForm","React","createMessage","fetchMessages","selectMessages","selectEmail","useSelector","useRef","Chat","dispatch","useEffect","fetchFunk","data","console","log","messages","payload","register","handleSubmit","setError","formState","errors","isValid","defaultValues","receiver","text","onSubmit","values","mail","truemail","input","current","alert","map","m","author","email","required"],"sources":["/Users/tim/Documents/programming/newProject/newpr/src/components/Chat/Chat.jsx"],"sourcesContent":["import { useDispatch } from \"react-redux\"\nimport Account from \"./Account/Account\"\nimport { useForm } from 'react-hook-form'\nimport React from \"react\"\nimport { createMessage, fetchMessages, selectMessages } from \"../../redux/slices/chat\"\nimport { selectEmail } from \"../../redux/slices/auth\"\nimport { useSelector } from \"react-redux\"\nimport { useRef } from \"react\"\n\n\nfunction Chat() {\n\n   const dispatch = useDispatch()\n   \n   React.useEffect(() => {\n      fetchFunk()\n   }, [])\n\n   const fetchFunk = async () => {\n      const data = await dispatch(fetchMessages())\n      console.log(messages)\n      console.log(data.payload)\n   }\n\n   const {\n      register,\n      handleSubmit,\n      setError,\n      formState: { errors, isValid },\n   } = useForm({\n      defaultValues: {\n         receiver: '',\n         text: ''\n      }\n   })\n\n   const onSubmit = async (values) => {\n      \n      if (mail === truemail) {\n         values.receiver = \"anatoliy@gmai.com\"\n      } else {\n         values.receiver = \"parfparf@gmail.com\"\n      }\n      console.log(values)\n      const data = await dispatch(createMessage(values))\n      input.current.values = ''\n      console.log('запросик')\n      if (!data.payload) {\n         return alert(\"Не удалось отправить сообщение\")\n      }\n      fetchFunk()\n      // if ('token' in data.payload) {\n      //    window.localStorage.setItem('token', data.payload.token)\n      //    setIsOpenPopup1(false)\n      // }\n   }\n\n   const messages = useSelector(selectMessages)\n\n   const mail = useSelector(selectEmail)\n   const truemail = 'parfparf@gmail.com'\n\n   const input = useRef(null)\n\n   return (\n      <>\n      <div className=\"chat__wrapper\">\n      <div className=\"chat__accounts\">\n         <Account />\n         {/* <div className=\"chat__account account\">\n            <div className=\"account__login\">Троцкий</div>\n         </div>\n         <div className=\"chat__account chat__account_select account\">\n            <div className=\"account__login\">Анатолий</div>\n         </div> */}\n      </div>\n      <div className=\"chat__area area\">\n         <div className=\"area__login\">\n            {\n               mail === truemail \n               ? <><span>Anatoliy</span><span>(anatoliy@gmail.com)</span></>\n               : <><span>Timaaa</span><span>(parfparf@gmail.com)</span></>\n            }\n           </div>\n         <div className=\"area__main\">\n         <div className=\"area__content\">\n            {  \n               messages?.map((m) => {\n                  if (m.author.email == mail) {\n                     return  <div  className=\"area__message area__message_my\"><span>{m.text}</span></div>\n                  } else {\n                     return <div className=\"area__message\"><span>{m.text}</span></div>\n                  }\n               })\n            }\n            {/* <div className=\"area__message\"><span>привет Lorem ipsum dolor, sit amet consectetur adipisicing elit. Ratione consequatur repellat velit recusandae fugit nisi inventore amet molestiae, repudiandae ipsum sit eum voluptas, suscipit vero laudantium! Officiis a consectetur architecto repudiandae autem, dolorem et voluptate. Sint dolores optio, alias placeat dolorum itaque nihil, voluptatibus totam omnis architecto cumque? Deleniti dolorem sunt harum quas nesciunt repellat dolores error! Deserunt maiores, cupiditate, culpa quae molestias debitis voluptate eos laboriosam qui saepe non, eligendi odit modi perferendis ratione? Delectus quos reiciendis consequuntur eaque illo provident dicta soluta molestias accusantium et alias commodi maxime doloremque, at labore voluptates doloribus dolores necessitatibus similique culpa dolorem voluptatum. Libero dolorum voluptatum ab autem amet at nostrum ipsam, ex aliquid assumenda nobis! Delectus eaque voluptatum, corporis commodi non doloremque aut iste enim, temporibus beatae, possimus ab numquam minus nostrum asperiores libero nam autem ipsa est nulla quasi architecto? In, reiciendis sunt illo deserunt autem numquam obcaecati natus tempore officiis possimus explicabo nam sint cumque ducimus quo debitis sed. Doloremque unde quam itaque impedit veniam aliquam qui ipsam eius, aliquid exercitationem distinctio deleniti laboriosam architecto sequi a enim repudiandae voluptates, blanditiis velit sed ut consectetur? Ullam assumenda tenetur in vel corporis dolore facere non consequuntur nobis et, dicta maiores cum excepturi laborum culpa ratione ipsa ipsam consectetur. Facilis, corrupti ipsum. Eum, vero reprehenderit natus, maxime repellendus dignissimos recusandae accusantium harum mollitia laborum doloribus consequuntur est beatae ea laudantium nobis ullam soluta. Nostrum non nemo, laborum optio ipsum alias quidem qui sed magni odit accusantium iusto nisi blanditiis maiores sequi ducimus nobis. Harum tempore quisquam animi, ducimus voluptate autem velit inventore nulla eligendi pariatur in nemo, adipisci ea expedita perferendis voluptates labore? Dolorem, eos, autem mollitia dolor sint est eius tenetur delectus earum fuga vero tempore dolore modi provident saepe omnis voluptatibus excepturi ducimus eum quos. Iste itaque alias esse.</span></div> */}\n            {/* <div className=\"area__message\"><span>Здравствуйте</span></div>\n            <div className=\"area__message\"><span>Я очень рада, что вы нашли мой шарф, я могу его сегодня забрать?</span></div>\n            <div className=\"area__message area__message_my\"><span>Добрый день, конечно</span></div> */}\n            {/* <div className=\"area__message area__message_my\"><span>Добрый день, конено</span></div> */}\n         </div>\n         </div>\n         <form onSubmit={handleSubmit(onSubmit)} className=\"area__bottom\">\n            <input ref={input} {...register('text', { required: \"Напишите сообщение\" })} className=\"area__input\"></input>\n            <button type='submit' className=\"area__button\">Отправить</button>\n         </form>\n      </div>\n      </div>\n      </>\n   )\n}\nexport default Chat\n\n\n{/* <form onSubmit={handleSubmit(onSubmit)}>\n                    \n                        <TextField\n                           label=\"Cообщение\"\n                           type=\"email\"\n                           className='email-textfield'\n                           fullwidth\n                           error={Boolean(errors.email?.message)}\n                           {...register('email', { required: \"Укажите почту\" })}\n                        />\n                     \n                     <button type='submit' class=\"login__button\"><span>Войти</span></button>\n</form> */}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}